/**
 * @param  {TinyMCE} The TinyMCE EditorManager.
 */
( function( tinymce ) {
	// A dumb piece of state to open the toolbar on the next `wptoolbar` event call.
	var openTheToolbar = false;

	var toolbarOptions = {};

	// I guess this is necessary? It is non-trivial to create a Unicode string
	// outside of the basic multilingual plane.
	function fromCodePoint() {
		var chars= Array.prototype.slice.call(arguments);
		for (var i= chars.length; i-->0;) {
			var n = chars[i]-0x10000;
			if (n>=0)
				chars.splice(i, 1, 0xD800+(n>>10), 0xDC00+(n&0x3FF));
		}
		return String.fromCharCode.apply(null, chars);
	}

	var emojiList = [{"annotations":"face grin person","codepoint":128512},{"annotations":"eye face grin person smile","codepoint":128513},{"annotations":"face joy laugh person tear","codepoint":128514},{"annotations":"face mouth open person smile","codepoint":128515},{"annotations":"eye face mouth open person smile","codepoint":128516},{"annotations":"cold face open person smile sweat","codepoint":128517},{"annotations":"face laugh mouth open person satisfied smile","codepoint":128518},{"annotations":"face person wink","codepoint":128521},{"annotations":"blush eye face person smile","codepoint":128522},{"annotations":"delicious face food person savouring smile um yum","codepoint":128523},{"annotations":"bright cool eye eyewear face glasses person smile sun sunglasses weather","codepoint":128526},{"annotations":"eye face heart love person smile","codepoint":128525},{"annotations":"face heart kiss person","codepoint":128536},{"annotations":"face kiss person","codepoint":128535},{"annotations":"eye face kiss person smile","codepoint":128537},{"annotations":"closed eye face kiss person","codepoint":128538},{"annotations":"face outlined person relaxed smile","codepoint":9786},{"annotations":"face person smile","codepoint":128578},{"annotations":"face hug hugging person","codepoint":129303},{"annotations":"angel face fairy tale fantasy halo innocent person smile","codepoint":128519},{"annotations":"face geek nerd person","codepoint":129299},{"annotations":"face person thinking","codepoint":129300},{"annotations":"deadpan face neutral person","codepoint":128528},{"annotations":"expressionless face inexpressive person unexpressive","codepoint":128529},{"annotations":"face mouth person quiet silent","codepoint":128566},{"annotations":"eyes face person rolling","codepoint":128580},{"annotations":"face person smirk","codepoint":128527},{"annotations":"face persevere person","codepoint":128547},{"annotations":"disappointed face person relieved whew","codepoint":128549},{"annotations":"face mouth open person sympathy","codepoint":128558},{"annotations":"face mouth person zipper","codepoint":129296},{"annotations":"face hushed person stunned surprised","codepoint":128559},{"annotations":"face person sleep","codepoint":128554},{"annotations":"face person tired","codepoint":128555},{"annotations":"face person sleep zzz","codepoint":128564},{"annotations":"face person relieved","codepoint":128524},{"annotations":"face person tongue","codepoint":128539},{"annotations":"eye face joke person tongue wink","codepoint":128540},{"annotations":"eye face horrible person taste tongue","codepoint":128541},{"annotations":"face person unamused unhappy","codepoint":128530},{"annotations":"cold face person sweat","codepoint":128531},{"annotations":"dejected face pensive person","codepoint":128532},{"annotations":"confused face person","codepoint":128533},{"annotations":"face person upside-down","codepoint":128579},{"annotations":"face money mouth person","codepoint":129297},{"annotations":"astonished face person shocked totally","codepoint":128562},{"annotations":"cold doctor face mask medicine person sick","codepoint":128567},{"annotations":"face ill person sick thermometer","codepoint":129298},{"annotations":"bandage face hurt injury person","codepoint":129301},{"annotations":"face frown person","codepoint":9785},{"annotations":"face frown person","codepoint":128577},{"annotations":"confounded face person","codepoint":128534},{"annotations":"disappointed face person","codepoint":128542},{"annotations":"face person worried","codepoint":128543},{"annotations":"face person triumph won","codepoint":128548},{"annotations":"cry face person sad tear","codepoint":128546},{"annotations":"cry face person sad sob tear","codepoint":128557},{"annotations":"face frown mouth open person","codepoint":128550},{"annotations":"anguished face person","codepoint":128551},{"annotations":"face fear fearful person scared","codepoint":128552},{"annotations":"face person tired weary","codepoint":128553},{"annotations":"face grimace person","codepoint":128556},{"annotations":"blue cold face mouth open person rushed sweat","codepoint":128560},{"annotations":"face fear fearful munch person scared scream","codepoint":128561},{"annotations":"dazed face flushed person","codepoint":128563},{"annotations":"dizzy face person","codepoint":128565},{"annotations":"angry face mad person pouting rage red","codepoint":128545},{"annotations":"angry face mad person","codepoint":128544},{"annotations":"face fairy tale fantasy horns person smile","codepoint":128520},{"annotations":"demon devil face fairy tale fantasy imp person","codepoint":128127},{"annotations":"creature face fairy tale fantasy japanese monster ogre person","codepoint":128121},{"annotations":"creature face fairy tale fantasy goblin japanese monster person","codepoint":128122},{"annotations":"body death face fairy tale monster person skull","codepoint":128128},{"annotations":"body crossbones death face monster person skull","codepoint":9760},{"annotations":"creature face fairy tale fantasy ghost monster person","codepoint":128123},{"annotations":"alien creature extraterrestrial face fairy tale fantasy monster nature person space ufo","codepoint":128125},{"annotations":"alien creature extraterrestrial face fairy tale fantasy monster nature person space ufo","codepoint":128126},{"annotations":"face monster person robot","codepoint":129302},{"annotations":"comic dung face monster nature object poo poop","codepoint":128169},{"annotations":"animal cat face mouth nature open smile","codepoint":128570},{"annotations":"animal cat eye face grin nature smile","codepoint":128568},{"annotations":"animal cat face joy nature tear","codepoint":128569},{"annotations":"animal cat eye face heart love nature smile","codepoint":128571},{"annotations":"animal cat face ironic nature smile wry","codepoint":128572},{"annotations":"animal cat eye face kiss nature","codepoint":128573},{"annotations":"animal cat face nature oh surprised weary","codepoint":128576},{"annotations":"animal cat cry face nature sad tear","codepoint":128575},{"annotations":"animal cat face nature pouting","codepoint":128574},{"annotations":"animal evil face forbidden gesture monkey nature no not prohibited see","codepoint":128584},{"annotations":"animal evil face forbidden gesture hear monkey nature no not prohibited","codepoint":128585},{"annotations":"animal evil face forbidden gesture monkey nature no not prohibited speak","codepoint":128586},{"annotations":"boy person","codepoint":128102},{"annotations":"girl maiden person virgin virgo zodiac","codepoint":128103},{"annotations":"man person","codepoint":128104},{"annotations":"person woman","codepoint":128105},{"annotations":"man old person","codepoint":128116},{"annotations":"old person woman","codepoint":128117},{"annotations":"baby person","codepoint":128118},{"annotations":"blond person","codepoint":128113},{"annotations":"cop officer person police","codepoint":128110},{"annotations":"gua pi mao hat man person","codepoint":128114},{"annotations":"man person turban","codepoint":128115},{"annotations":"construction hat person worker","codepoint":128119},{"annotations":"aid cross face hat helmet person","codepoint":9937},{"annotations":"fairy tale fantasy person princess","codepoint":128120},{"annotations":"guard guardsman person","codepoint":128130},{"annotations":"detective person sleuth spy","codepoint":128373},{"annotations":"activity celebration christmas fairy tale fantasy father person santa","codepoint":127877},{"annotations":"bride person veil wedding","codepoint":128112},{"annotations":"angel baby face fairy tale fantasy person","codepoint":128124},{"annotations":"massage person salon","codepoint":128134},{"annotations":"barber beauty haircut parlor person","codepoint":128135},{"annotations":"frown gesture person","codepoint":128589},{"annotations":"gesture person pouting","codepoint":128590},{"annotations":"forbidden gesture hand no not person prohibited","codepoint":128581},{"annotations":"gesture hand ok person","codepoint":128582},{"annotations":"hand help information person sassy","codepoint":128129},{"annotations":"gesture hand happy person raised","codepoint":128587},{"annotations":"apology bow gesture person sorry","codepoint":128583},{"annotations":"body celebration gesture hand hooray person raised","codepoint":128588},{"annotations":"ask body bow folded gesture hand person please pray thanks","codepoint":128591},{"annotations":"face head person silhouette speak speaking","codepoint":128483},{"annotations":"bust person silhouette","codepoint":128100},{"annotations":"bust person silhouette","codepoint":128101},{"annotations":"hike pedestrian person walk walking","codepoint":128694},{"annotations":"marathon person runner running","codepoint":127939},{"annotations":"bunny dancer ear girl person woman","codepoint":128111},{"annotations":"dancer person","codepoint":128131},{"annotations":"business man person suit","codepoint":128372},{"annotations":"couple hand hold man person woman","codepoint":128107},{"annotations":"couple gemini hand hold man person twins zodiac","codepoint":128108},{"annotations":"couple hand hold person woman","codepoint":128109},{"annotations":"couple kiss person romance","codepoint":128143},{"annotations":"couple heart love person romance","codepoint":128145},{"annotations":"child family father mother person","codepoint":128106},{"annotations":"emoji modifier fitzpatrick skin symbol tone","codepoint":127995},{"annotations":"emoji modifier fitzpatrick skin symbol tone","codepoint":127996},{"annotations":"emoji modifier fitzpatrick skin symbol tone","codepoint":127997},{"annotations":"emoji modifier fitzpatrick skin symbol tone","codepoint":127998},{"annotations":"emoji modifier fitzpatrick skin symbol tone","codepoint":127999},{"annotations":"biceps body comic flex muscle person","codepoint":128170},{"annotations":"backhand body finger hand index person point","codepoint":128072},{"annotations":"backhand body finger hand index person point","codepoint":128073},{"annotations":"body finger hand index person point up","codepoint":9757},{"annotations":"backhand body finger hand index person point up","codepoint":128070},{"annotations":"body finger hand middle finger person","codepoint":128405},{"annotations":"backhand body down finger hand index person point","codepoint":128071},{"annotations":"body hand person v victory","codepoint":9996},{"annotations":"body finger hand person spock vulcan","codepoint":128406},{"annotations":"body finger hand horns person rock-on","codepoint":129304},{"annotations":"body finger hand person splayed","codepoint":128400},{"annotations":"body hand person","codepoint":9995},{"annotations":"body hand ok person","codepoint":128076},{"annotations":"+1 body hand person thumb thumbs up up","codepoint":128077},{"annotations":"-1 body down hand person thumb thumbs down","codepoint":128078},{"annotations":"body clenched fist hand person punch","codepoint":9994},{"annotations":"body clenched fist hand person punch","codepoint":128074},{"annotations":"body hand person wave waving","codepoint":128075},{"annotations":"body clap hand person","codepoint":128079},{"annotations":"body hand open person","codepoint":128080},{"annotations":"body education hand person write","codepoint":9997},{"annotations":"body care cosmetics manicure nail person polish","codepoint":128133},{"annotations":"body ear person","codepoint":128066},{"annotations":"body nose person","codepoint":128067},{"annotations":"body clothing footprint person print","codepoint":128099},{"annotations":"body eye face person","codepoint":128064},{"annotations":"body eye person","codepoint":128065},{"annotations":"body person tongue","codepoint":128069},{"annotations":"body lips mouth person","codepoint":128068},{"annotations":"emotion heart kiss lips mark person romance","codepoint":128139},{"annotations":"arrow cupid emotion heart person romance","codepoint":128152},{"annotations":"emotion heart person","codepoint":10084},{"annotations":"beating emotion heart heartbeat person pulsating","codepoint":128147},{"annotations":"break broken emotion heart person","codepoint":128148},{"annotations":"emotion heart love person","codepoint":128149},{"annotations":"emotion excited heart person sparkle","codepoint":128150},{"annotations":"emotion excited growing heart heartpulse nervous person","codepoint":128151},{"annotations":"blue emotion heart person","codepoint":128153},{"annotations":"emotion green heart person","codepoint":128154},{"annotations":"emotion heart person yellow","codepoint":128155},{"annotations":"emotion heart person purple","codepoint":128156},{"annotations":"emotion heart object person ribbon valentine","codepoint":128157},{"annotations":"emotion heart person revolving","codepoint":128158},{"annotations":"emotion heart person symbol","codepoint":128159},{"annotations":"emotion exclamation heart mark punctuation symbol","codepoint":10083},{"annotations":"emotion heart letter love mail person romance","codepoint":128140},{"annotations":"comic emotion person sleep symbol word zzz","codepoint":128164},{"annotations":"angry comic emotion mad person symbol","codepoint":128162},{"annotations":"bomb comic object","codepoint":128163},{"annotations":"boom collision comic emotion person","codepoint":128165},{"annotations":"comic emotion object person splashing sweat","codepoint":128166},{"annotations":"comic dash emotion object person running","codepoint":128168},{"annotations":"comic dizzy emotion person star","codepoint":128171},{"annotations":"balloon bubble comic dialog emotion object person speech","codepoint":128172},{"annotations":"dialog other speech","codepoint":128488},{"annotations":"angry balloon bubble emotion mad symbol","codepoint":128495},{"annotations":"balloon bubble comic emotion object person thought","codepoint":128173},{"annotations":"hole symbol","codepoint":128371},{"annotations":"clothing eye eyeglasses eyewear glasses object person","codepoint":128083},{"annotations":"dark eye eyewear glasses object sunglasses","codepoint":128374},{"annotations":"clothing necktie object person","codepoint":128084},{"annotations":"clothing object person shirt tshirt","codepoint":128085},{"annotations":"clothing jeans object pants person trousers","codepoint":128086},{"annotations":"clothing dress object person","codepoint":128087},{"annotations":"clothing kimono object person","codepoint":128088},{"annotations":"bikini clothing object person swim","codepoint":128089},{"annotations":"clothing object person woman","codepoint":128090},{"annotations":"clothing coin object person purse","codepoint":128091},{"annotations":"bag clothing handbag object person","codepoint":128092},{"annotations":"bag clothing object person pouch","codepoint":128093},{"annotations":"bag hotel object shopping","codepoint":128717},{"annotations":"activity bag education object satchel school","codepoint":127890},{"annotations":"clothing man object person shoe","codepoint":128094},{"annotations":"athletic clothing object person shoe sneaker","codepoint":128095},{"annotations":"clothing heel object person shoe woman","codepoint":128096},{"annotations":"clothing object person sandal shoe woman","codepoint":128097},{"annotations":"boot clothing object person shoe woman","codepoint":128098},{"annotations":"clothing crown king object person queen","codepoint":128081},{"annotations":"clothing hat object person woman","codepoint":128082},{"annotations":"activity clothing entertainment hat object person top tophat","codepoint":127913},{"annotations":"activity cap celebration clothing education graduation hat object","codepoint":127891},{"annotations":"beads clothing necklace object person prayer religion","codepoint":128255},{"annotations":"cosmetics lipstick makeup object person","codepoint":128132},{"annotations":"diamond emotion object person ring romance","codepoint":128141},{"annotations":"diamond emotion gem jewel object person romance","codepoint":128142},{"annotations":"animal face monkey nature","codepoint":128053},{"annotations":"animal monkey nature","codepoint":128018},{"annotations":"animal dog face nature pet","codepoint":128054},{"annotations":"animal dog nature pet","codepoint":128021},{"annotations":"animal dog nature poodle","codepoint":128041},{"annotations":"animal face nature wolf","codepoint":128058},{"annotations":"animal cat face nature pet","codepoint":128049},{"annotations":"animal cat nature pet","codepoint":128008},{"annotations":"animal face leo lion nature zodiac","codepoint":129409},{"annotations":"animal face nature tiger","codepoint":128047},{"annotations":"animal nature tiger","codepoint":128005},{"annotations":"animal leopard nature","codepoint":128006},{"annotations":"animal face horse nature","codepoint":128052},{"annotations":"animal horse nature place racehorse racing","codepoint":128014},{"annotations":"animal face nature unicorn","codepoint":129412},{"annotations":"animal cow face nature","codepoint":128046},{"annotations":"animal bull nature ox taurus zodiac","codepoint":128002},{"annotations":"animal buffalo nature water","codepoint":128003},{"annotations":"animal cow nature","codepoint":128004},{"annotations":"animal face nature pig","codepoint":128055},{"annotations":"animal nature pig sow","codepoint":128022},{"annotations":"animal boar nature pig","codepoint":128023},{"annotations":"animal face nature nose pig","codepoint":128061},{"annotations":"animal aries nature ram sheep zodiac","codepoint":128015},{"annotations":"animal ewe nature sheep","codepoint":128017},{"annotations":"animal capricorn goat nature zodiac","codepoint":128016},{"annotations":"animal camel dromedary hump nature","codepoint":128042},{"annotations":"animal bactrian camel hump nature","codepoint":128043},{"annotations":"animal elephant nature","codepoint":128024},{"annotations":"animal face mouse nature","codepoint":128045},{"annotations":"animal mouse nature","codepoint":128001},{"annotations":"animal nature rat","codepoint":128000},{"annotations":"animal face hamster nature pet","codepoint":128057},{"annotations":"animal bunny face nature pet rabbit","codepoint":128048},{"annotations":"animal bunny nature pet rabbit","codepoint":128007},{"annotations":"animal chipmunk nature","codepoint":128063},{"annotations":"animal bear face nature","codepoint":128059},{"annotations":"animal bear koala nature","codepoint":128040},{"annotations":"animal face nature panda","codepoint":128060},{"annotations":"animal feet nature paw print","codepoint":128062},{"annotations":"animal nature turkey","codepoint":129411},{"annotations":"animal chicken nature","codepoint":128020},{"annotations":"animal nature rooster","codepoint":128019},{"annotations":"animal baby chick hatching nature","codepoint":128035},{"annotations":"animal baby chick nature","codepoint":128036},{"annotations":"animal baby chick nature","codepoint":128037},{"annotations":"animal bird nature","codepoint":128038},{"annotations":"animal nature penguin","codepoint":128039},{"annotations":"animal bird dove fly nature peace","codepoint":128330},{"annotations":"animal face frog nature","codepoint":128056},{"annotations":"animal crocodile nature","codepoint":128010},{"annotations":"animal nature turtle","codepoint":128034},{"annotations":"animal bearer nature ophiuchus serpent snake zodiac","codepoint":128013},{"annotations":"animal dragon face fairy tale nature","codepoint":128050},{"annotations":"animal dragon fairy tale nature","codepoint":128009},{"annotations":"animal face nature spouting whale","codepoint":128051},{"annotations":"animal nature whale","codepoint":128011},{"annotations":"animal dolphin flipper nature","codepoint":128044},{"annotations":"animal fish nature pisces zodiac","codepoint":128031},{"annotations":"animal fish nature tropical","codepoint":128032},{"annotations":"animal blowfish fish nature","codepoint":128033},{"annotations":"animal nature octopus","codepoint":128025},{"annotations":"animal nature shell spiral","codepoint":128026},{"annotations":"animal cancer crab nature zodiac","codepoint":129408},{"annotations":"animal nature snail","codepoint":128012},{"annotations":"animal bug insect nature","codepoint":128027},{"annotations":"animal ant insect nature","codepoint":128028},{"annotations":"animal bee honeybee insect nature","codepoint":128029},{"annotations":"animal beetle insect lady beetle ladybird ladybug nature","codepoint":128030},{"annotations":"animal insect object spider","codepoint":128375},{"annotations":"animal object spider web","codepoint":128376},{"annotations":"animal nature scorpio scorpion scorpius zodiac","codepoint":129410},{"annotations":"bouquet flower nature object place plant romance","codepoint":128144},{"annotations":"blossom cherry flower nature plant","codepoint":127800},{"annotations":"flower object symbol","codepoint":128174},{"annotations":"nature plant rosette","codepoint":127989},{"annotations":"flower nature plant rose","codepoint":127801},{"annotations":"flower hibiscus nature plant","codepoint":127802},{"annotations":"flower nature plant sun sunflower","codepoint":127803},{"annotations":"blossom flower nature plant","codepoint":127804},{"annotations":"flower nature plant tulip","codepoint":127799},{"annotations":"nature plant seedling young","codepoint":127793},{"annotations":"evergreen nature plant tree","codepoint":127794},{"annotations":"deciduous nature plant shedding tree","codepoint":127795},{"annotations":"nature palm plant tree","codepoint":127796},{"annotations":"cactus nature plant","codepoint":127797},{"annotations":"ear nature plant rice","codepoint":127806},{"annotations":"herb leaf nature plant","codepoint":127807},{"annotations":"nature plant shamrock","codepoint":9752},{"annotations":"4 clover four leaf nature plant","codepoint":127808},{"annotations":"falling leaf maple nature plant","codepoint":127809},{"annotations":"falling leaf nature plant","codepoint":127810},{"annotations":"blow flutter leaf nature plant wind","codepoint":127811},{"annotations":"food fruit grape nature object plant","codepoint":127815},{"annotations":"food fruit melon nature object plant","codepoint":127816},{"annotations":"food fruit nature object plant watermelon","codepoint":127817},{"annotations":"food fruit nature object orange plant tangerine","codepoint":127818},{"annotations":"citrus food fruit lemon nature object plant","codepoint":127819},{"annotations":"banana food fruit nature object plant","codepoint":127820},{"annotations":"food fruit nature object pineapple plant","codepoint":127821},{"annotations":"apple food fruit nature object plant red","codepoint":127822},{"annotations":"apple food fruit green nature object plant","codepoint":127823},{"annotations":"food fruit nature object pear plant","codepoint":127824},{"annotations":"food fruit nature object peach plant","codepoint":127825},{"annotations":"cherry food fruit nature object plant","codepoint":127826},{"annotations":"berry food fruit nature object plant strawberry","codepoint":127827},{"annotations":"food nature object plant tomato vegetable","codepoint":127813},{"annotations":"aubergine eggplant food nature object plant vegetable","codepoint":127814},{"annotations":"corn ear maize maze nature object plant","codepoint":127805},{"annotations":"food hot nature pepper plant","codepoint":127798},{"annotations":"mushroom nature plant","codepoint":127812},{"annotations":"chestnut nature plant","codepoint":127792},{"annotations":"bread food loaf nature object","codepoint":127838},{"annotations":"cheese food nature","codepoint":129472},{"annotations":"bone food meat nature object","codepoint":127830},{"annotations":"bone chicken food leg nature object poultry","codepoint":127831},{"annotations":"burger food hamburger nature object","codepoint":127828},{"annotations":"food french fries nature object","codepoint":127839},{"annotations":"cheese food nature object pizza slice","codepoint":127829},{"annotations":"food frankfurter hot dog hotdog nature sausage","codepoint":127789},{"annotations":"food mexican nature taco","codepoint":127790},{"annotations":"burrito food mexican nature","codepoint":127791},{"annotations":"cooking egg food frying nature object pan","codepoint":127859},{"annotations":"food nature object pot stew","codepoint":127858},{"annotations":"food nature popcorn","codepoint":127871},{"annotations":"bento box food nature object","codepoint":127857},{"annotations":"cracker food nature object rice","codepoint":127832},{"annotations":"ball food japanese nature object rice","codepoint":127833},{"annotations":"cooked food nature object rice","codepoint":127834},{"annotations":"curry food nature object rice","codepoint":127835},{"annotations":"bowl food nature noodle object ramen steaming","codepoint":127836},{"annotations":"food nature object pasta spaghetti","codepoint":127837},{"annotations":"food nature object potato roasted sweet","codepoint":127840},{"annotations":"food kebab nature object oden seafood skewer stick","codepoint":127842},{"annotations":"food nature object sushi","codepoint":127843},{"annotations":"food fried nature object prawn shrimp tempura","codepoint":127844},{"annotations":"cake fish food nature object pastry swirl","codepoint":127845},{"annotations":"dango dessert food japanese nature object skewer stick sweet","codepoint":127841},{"annotations":"cream dessert food ice icecream nature object soft sweet","codepoint":127846},{"annotations":"dessert food ice nature object shaved sweet","codepoint":127847},{"annotations":"cream dessert food ice nature object sweet","codepoint":127848},{"annotations":"dessert donut doughnut food nature object sweet","codepoint":127849},{"annotations":"cookie dessert food nature object sweet","codepoint":127850},{"annotations":"birthday cake celebration dessert food object pastry sweet","codepoint":127874},{"annotations":"cake dessert food nature object pastry shortcake slice sweet","codepoint":127856},{"annotations":"bar chocolate dessert food nature object sweet","codepoint":127851},{"annotations":"candy dessert food nature object sweet","codepoint":127852},{"annotations":"candy dessert food lollipop nature object sweet","codepoint":127853},{"annotations":"custard dessert food nature object pudding sweet","codepoint":127854},{"annotations":"food honey honeypot nature object pot sweet","codepoint":127855},{"annotations":"baby bottle drink milk nature object","codepoint":127868},{"annotations":"beverage coffee drink hot nature object steaming tea","codepoint":9749},{"annotations":"beverage cup drink nature object tea teacup","codepoint":127861},{"annotations":"bar beverage bottle cup drink nature object sake","codepoint":127862},{"annotations":"bar bottle cork drink nature popping","codepoint":127870},{"annotations":"bar beverage drink glass nature object wine","codepoint":127863},{"annotations":"bar cocktail drink glass nature object","codepoint":127864},{"annotations":"bar drink nature object tropical","codepoint":127865},{"annotations":"bar beer drink mug nature object","codepoint":127866},{"annotations":"bar beer clink drink mug nature object","codepoint":127867},{"annotations":"cooking food fork knife object place plate","codepoint":127869},{"annotations":"cooking food fork knife nature object","codepoint":127860},{"annotations":"cooking hocho knife object tool weapon","codepoint":128298},{"annotations":"amphora aquarius cooking drink jug nature tool weapon zodiac","codepoint":127994},{"annotations":"africa earth europe globe nature place world","codepoint":127757},{"annotations":"americas earth globe nature place world","codepoint":127758},{"annotations":"asia australia earth globe nature place world","codepoint":127759},{"annotations":"earth globe meridians nature place world","codepoint":127760},{"annotations":"map place world","codepoint":128506},{"annotations":"japan map place","codepoint":128510},{"annotations":"cold mountain nature place snow","codepoint":127956},{"annotations":"mountain place","codepoint":9968},{"annotations":"eruption mountain nature place volcano weather","codepoint":127755},{"annotations":"fuji mountain nature place","codepoint":128507},{"annotations":"camping nature place","codepoint":127957},{"annotations":"beach nature place umbrella","codepoint":127958},{"annotations":"desert nature place","codepoint":127964},{"annotations":"desert island nature place","codepoint":127965},{"annotations":"national park nature park place","codepoint":127966},{"annotations":"place stadium","codepoint":127967},{"annotations":"building classical place","codepoint":127963},{"annotations":"building construction place","codepoint":127959},{"annotations":"building house place","codepoint":127960},{"annotations":"building city place","codepoint":127961},{"annotations":"building derelict house place","codepoint":127962},{"annotations":"building home house place","codepoint":127968},{"annotations":"building garden home house place","codepoint":127969},{"annotations":"building office place","codepoint":127970},{"annotations":"building japanese office place post","codepoint":127971},{"annotations":"building european office place post","codepoint":127972},{"annotations":"building doctor hospital medicine place","codepoint":127973},{"annotations":"bank building place","codepoint":127974},{"annotations":"building hotel place","codepoint":127976},{"annotations":"building hotel love place","codepoint":127977},{"annotations":"building convenience place store","codepoint":127978},{"annotations":"building education place school","codepoint":127979},{"annotations":"building department place store","codepoint":127980},{"annotations":"building factory place","codepoint":127981},{"annotations":"building castle japanese place","codepoint":127983},{"annotations":"building castle european place","codepoint":127984},{"annotations":"activity chapel place romance wedding","codepoint":128146},{"annotations":"place tokyo tower","codepoint":128508},{"annotations":"liberty place statue","codepoint":128509},{"annotations":"building christian church cross place religion","codepoint":9962},{"annotations":"islam mosque muslim place religion","codepoint":128332},{"annotations":"jew jewish place religion synagogue temple","codepoint":128333},{"annotations":"religion shinto shrine symbol","codepoint":9961},{"annotations":"islam kaaba muslim place religion","codepoint":128331},{"annotations":"fountain object place","codepoint":9970},{"annotations":"camping object place tent","codepoint":9978},{"annotations":"fog nature place weather","codepoint":127745},{"annotations":"nature night place star weather","codepoint":127747},{"annotations":"morning mountain nature place sun sunrise time weather","codepoint":127748},{"annotations":"morning nature place sun sunrise time weather","codepoint":127749},{"annotations":"building city dusk evening landscape nature place sun sunset time weather","codepoint":127750},{"annotations":"building dusk nature place sun sunset time weather","codepoint":127751},{"annotations":"bridge nature night place weather","codepoint":127753},{"annotations":"hot hotsprings place springs steaming","codepoint":9832},{"annotations":"milky way nature place space weather","codepoint":127756},{"annotations":"activity carousel entertainment horse place","codepoint":127904},{"annotations":"activity amusement park entertainment ferris place wheel","codepoint":127905},{"annotations":"activity amusement park coaster entertainment place roller","codepoint":127906},{"annotations":"barber haircut place pole","codepoint":128136},{"annotations":"activity circus entertainment place tent","codepoint":127914},{"annotations":"activity art entertainment mask object performing place theater theatre","codepoint":127917},{"annotations":"art frame museum object office painting picture","codepoint":128444},{"annotations":"activity art entertainment museum object painting palette","codepoint":127912},{"annotations":"activity game object place slot","codepoint":127920},{"annotations":"engine locomotive place railway steam train travel vehicle","codepoint":128642},{"annotations":"car electric place railway train tram travel trolleybus vehicle","codepoint":128643},{"annotations":"place railway shinkansen speed train travel vehicle","codepoint":128644},{"annotations":"bullet place railway shinkansen speed train travel vehicle","codepoint":128645},{"annotations":"place railway train travel vehicle","codepoint":128646},{"annotations":"metro place subway travel vehicle","codepoint":128647},{"annotations":"place railway travel vehicle","codepoint":128648},{"annotations":"place railway station train travel vehicle","codepoint":128649},{"annotations":"place tram travel trolleybus vehicle","codepoint":128650},{"annotations":"monorail place travel vehicle","codepoint":128669},{"annotations":"car mountain place railway travel vehicle","codepoint":128670},{"annotations":"car place tram travel trolleybus vehicle","codepoint":128651},{"annotations":"bus place travel vehicle","codepoint":128652},{"annotations":"bus oncoming place travel vehicle","codepoint":128653},{"annotations":"bus place tram travel trolley trolleybus vehicle","codepoint":128654},{"annotations":"bus busstop place stop travel","codepoint":128655},{"annotations":"bus minibus place travel vehicle","codepoint":128656},{"annotations":"ambulance place travel vehicle","codepoint":128657},{"annotations":"engine fire place travel truck vehicle","codepoint":128658},{"annotations":"car patrol place police travel vehicle","codepoint":128659},{"annotations":"car oncoming place police travel vehicle","codepoint":128660},{"annotations":"place taxi travel vehicle","codepoint":128661},{"annotations":"oncoming place taxi travel vehicle","codepoint":128662},{"annotations":"automobile car place travel vehicle","codepoint":128663},{"annotations":"automobile car oncoming place travel vehicle","codepoint":128664},{"annotations":"place recreational rv travel vehicle","codepoint":128665},{"annotations":"delivery place travel truck vehicle","codepoint":128666},{"annotations":"lorry place semi travel truck vehicle","codepoint":128667},{"annotations":"place tractor travel vehicle","codepoint":128668},{"annotations":"bicycle bike place sport travel vehicle","codepoint":128690},{"annotations":"fuel fuelpump gas place pump station travel","codepoint":9981},{"annotations":"highway motorway place road travel","codepoint":128739},{"annotations":"place railway train travel","codepoint":128740},{"annotations":"beacon car light place police revolving travel vehicle","codepoint":128680},{"annotations":"light place signal traffic travel","codepoint":128677},{"annotations":"light place signal traffic travel","codepoint":128678},{"annotations":"barrier construction place travel","codepoint":128679},{"annotations":"anchor place ship tool travel","codepoint":9875},{"annotations":"boat place resort sailboat sea travel vehicle yacht","codepoint":9973},{"annotations":"boat place rowboat travel vehicle","codepoint":128675},{"annotations":"boat place speedboat travel vehicle","codepoint":128676},{"annotations":"passenger place ship travel vehicle","codepoint":128755},{"annotations":"boat ferry place travel","codepoint":9972},{"annotations":"boat motorboat place travel vehicle","codepoint":128741},{"annotations":"place ship travel vehicle","codepoint":128674},{"annotations":"airplane place travel vehicle","codepoint":9992},{"annotations":"airplane place travel vehicle","codepoint":128745},{"annotations":"airplane check-in departure departures place travel vehicle","codepoint":128747},{"annotations":"airplane arrivals arriving landing place travel vehicle","codepoint":128748},{"annotations":"chair object office place seat travel","codepoint":128186},{"annotations":"helicopter place travel vehicle","codepoint":128641},{"annotations":"place railway suspension travel vehicle","codepoint":128671},{"annotations":"cable gondola mountain place travel vehicle","codepoint":128672},{"annotations":"aerial cable car gondola place ropeway tramway travel vehicle","codepoint":128673},{"annotations":"place rocket space travel vehicle","codepoint":128640},{"annotations":"place satellite space vehicle","codepoint":128752},{"annotations":"bell bellhop hotel object","codepoint":128718},{"annotations":"door object travel","codepoint":128682},{"annotations":"hotel object sleep","codepoint":128716},{"annotations":"bed hotel object sleep","codepoint":128719},{"annotations":"couch hotel lamp object","codepoint":128715},{"annotations":"object place toilet travel","codepoint":128701},{"annotations":"object place shower travel water","codepoint":128703},{"annotations":"bath bathtub object place travel","codepoint":128704},{"annotations":"bath bathtub object place travel","codepoint":128705},{"annotations":"hourglass object sand time timer","codepoint":8987},{"annotations":"hourglass object sand time timer","codepoint":9203},{"annotations":"clock object time watch","codepoint":8986},{"annotations":"alarm clock object time","codepoint":9200},{"annotations":"clock object stopwatch time","codepoint":9201},{"annotations":"clock object time timer","codepoint":9202},{"annotations":"clock object","codepoint":128368},{"annotations":"00 12 12:00 clock o’clock symbol time twelve","codepoint":128347},{"annotations":"12 12:30 30 clock symbol thirty time twelve","codepoint":128359},{"annotations":"00 1 1:00 clock o’clock one symbol time","codepoint":128336},{"annotations":"1 1:30 30 clock one symbol thirty time","codepoint":128348},{"annotations":"00 2 2:00 clock o’clock symbol time two","codepoint":128337},{"annotations":"2 2:30 30 clock symbol thirty time two","codepoint":128349},{"annotations":"00 3 3:00 clock o’clock symbol three time","codepoint":128338},{"annotations":"3 3:30 30 clock symbol thirty three time","codepoint":128350},{"annotations":"00 4 4:00 clock four o’clock symbol time","codepoint":128339},{"annotations":"30 4 4:30 clock four symbol thirty time","codepoint":128351},{"annotations":"00 5 5:00 clock five o’clock symbol time","codepoint":128340},{"annotations":"30 5 5:30 clock five symbol thirty time","codepoint":128352},{"annotations":"00 6 6:00 clock o’clock six symbol time","codepoint":128341},{"annotations":"30 6 6:30 clock six symbol thirty time","codepoint":128353},{"annotations":"00 7 7:00 clock o’clock seven symbol time","codepoint":128342},{"annotations":"30 7 7:30 clock seven symbol thirty time","codepoint":128354},{"annotations":"00 8 8:00 clock eight o’clock symbol time","codepoint":128343},{"annotations":"30 8 8:30 clock eight symbol thirty time","codepoint":128355},{"annotations":"00 9 9:00 clock nine o’clock symbol time","codepoint":128344},{"annotations":"30 9 9:30 clock nine symbol thirty time","codepoint":128356},{"annotations":"00 10 10:00 clock o’clock symbol ten time","codepoint":128345},{"annotations":"10 10:30 30 clock symbol ten thirty time","codepoint":128357},{"annotations":"00 11 11:00 clock eleven o’clock symbol time","codepoint":128346},{"annotations":"11 11:30 30 clock eleven symbol thirty time","codepoint":128358},{"annotations":"dark moon nature place space time weather","codepoint":127761},{"annotations":"crescent moon nature place space time waxing weather","codepoint":127762},{"annotations":"moon nature place quarter space time weather","codepoint":127763},{"annotations":"gibbous moon nature place space time waxing weather","codepoint":127764},{"annotations":"full moon nature place space time weather","codepoint":127765},{"annotations":"gibbous moon nature place space time waning weather","codepoint":127766},{"annotations":"moon nature place quarter space time weather","codepoint":127767},{"annotations":"crescent moon nature place space time waning weather","codepoint":127768},{"annotations":"crescent moon nature place space time weather","codepoint":127769},{"annotations":"face moon nature place space time weather","codepoint":127770},{"annotations":"face moon nature place quarter space weather","codepoint":127771},{"annotations":"face moon nature place quarter space weather","codepoint":127772},{"annotations":"nature thermometer weather","codepoint":127777},{"annotations":"bright nature rays space sun sunny weather","codepoint":9728},{"annotations":"bright face full moon nature place space weather","codepoint":127773},{"annotations":"bright face nature place space sun weather","codepoint":127774},{"annotations":"nature place star","codepoint":11088},{"annotations":"glittery glow object place shining sparkle star","codepoint":127775},{"annotations":"activity falling nature place shooting space star","codepoint":127776},{"annotations":"cloud nature weather","codepoint":9729},{"annotations":"cloud nature sun weather","codepoint":9925},{"annotations":"cloud nature rain thunder weather","codepoint":9928},{"annotations":"cloud nature sun weather","codepoint":127780},{"annotations":"cloud nature sun weather","codepoint":127781},{"annotations":"cloud nature rain sun weather","codepoint":127782},{"annotations":"cloud nature rain weather","codepoint":127783},{"annotations":"cloud cold nature snow weather","codepoint":127784},{"annotations":"cloud lightning nature weather","codepoint":127785},{"annotations":"cloud nature tornado weather whirlwind","codepoint":127786},{"annotations":"cloud fog nature weather","codepoint":127787},{"annotations":"blow cloud face nature weather wind","codepoint":127788},{"annotations":"cyclone dizzy nature twister typhoon weather","codepoint":127744},{"annotations":"nature rain rainbow weather","codepoint":127752},{"annotations":"clothing nature person rain umbrella weather","codepoint":127746},{"annotations":"clothing nature rain umbrella weather","codepoint":9730},{"annotations":"clothing drop nature rain umbrella weather","codepoint":9748},{"annotations":"nature rain sun travel umbrella weather","codepoint":9969},{"annotations":"danger electric electricity lightning nature symbol voltage zap","codepoint":9889},{"annotations":"cold nature snow snowflake weather","codepoint":10052},{"annotations":"cold nature snow snowman weather","codepoint":9731},{"annotations":"cold nature snow snowman weather","codepoint":9924},{"annotations":"comet object space","codepoint":9732},{"annotations":"fire flame object tool","codepoint":128293},{"annotations":"cold comic drop emotion nature object person sweat weather","codepoint":128167},{"annotations":"nature ocean place water wave weather","codepoint":127754},{"annotations":"activity celebration entertainment halloween jack lantern object","codepoint":127875},{"annotations":"activity celebration christmas entertainment object tree","codepoint":127876},{"annotations":"activity celebration entertainment fireworks object","codepoint":127878},{"annotations":"activity celebration entertainment fireworks object sparkle","codepoint":127879},{"annotations":"emotion entertainment object sign sparkle star","codepoint":10024},{"annotations":"activity balloon celebration entertainment object","codepoint":127880},{"annotations":"activity celebration entertainment object party popper tada","codepoint":127881},{"annotations":"activity ball celebration confetti entertainment object","codepoint":127882},{"annotations":"activity banner celebration entertainment japanese object tree","codepoint":127883},{"annotations":"activity bamboo celebration japanese object pine plant","codepoint":127885},{"annotations":"activity celebration doll entertainment festival japanese object","codepoint":127886},{"annotations":"activity carp celebration entertainment flag object streamer","codepoint":127887},{"annotations":"activity bell celebration chime entertainment object wind","codepoint":127888},{"annotations":"activity celebration ceremony entertainment moon nature object","codepoint":127889},{"annotations":"celebration emotion object person ribbon","codepoint":127872},{"annotations":"box celebration entertainment gift object present wrapped","codepoint":127873},{"annotations":"celebration object reminder ribbon","codepoint":127895},{"annotations":"admission entertainment object ticket","codepoint":127903},{"annotations":"activity admission entertainment object place ticket","codepoint":127915},{"annotations":"celebration medal military object","codepoint":127894},{"annotations":"object place prize sport trophy","codepoint":127942},{"annotations":"medal object sport","codepoint":127941},{"annotations":"ball object place soccer sport","codepoint":9917},{"annotations":"ball baseball object place sport","codepoint":9918},{"annotations":"ball basketball hoop object place sport","codepoint":127936},{"annotations":"ball game object sport volleyball","codepoint":127952},{"annotations":"american ball football object place sport","codepoint":127944},{"annotations":"ball football object place rugby sport","codepoint":127945},{"annotations":"ball object place racquet sport tennis","codepoint":127934},{"annotations":"8 8 ball ball billiard eight game object place sport","codepoint":127921},{"annotations":"ball bowling game object place sport","codepoint":127923},{"annotations":"ball bat cricket game object sport","codepoint":127951},{"annotations":"ball field game hockey object sport stick","codepoint":127953},{"annotations":"game hockey ice object puck sport stick","codepoint":127954},{"annotations":"ball bat game object paddle sport table tennis","codepoint":127955},{"annotations":"badminton birdie game object racquet shuttlecock sport","codepoint":127992},{"annotations":"flag golf hole object place sport travel","codepoint":9971},{"annotations":"ball golf person sport","codepoint":127948},{"annotations":"ice place skate sport travel","codepoint":9976},{"annotations":"entertainment fish object place pole sport","codepoint":127907},{"annotations":"person place running sash shirt sport","codepoint":127933},{"annotations":"object ski snow sport","codepoint":127935},{"annotations":"person ski snow sport travel","codepoint":9975},{"annotations":"person ski snow snowboard sport","codepoint":127938},{"annotations":"person sport surfer surfing","codepoint":127940},{"annotations":"horse jockey person racehorse racing sport travel","codepoint":127943},{"annotations":"person sport swim swimmer travel","codepoint":127946},{"annotations":"ball person sport travel","codepoint":9977},{"annotations":"lifter person sport weight","codepoint":127947},{"annotations":"bicycle bicyclist bike cyclist person place sport travel","codepoint":128692},{"annotations":"bicycle bicyclist bike cyclist mountain person place sport travel","codepoint":128693},{"annotations":"car place racing sport travel","codepoint":127950},{"annotations":"motorcycle person racing sport travel","codepoint":127949},{"annotations":"activity bull bullseye dart entertainment eye game hit object target","codepoint":127919},{"annotations":"controller entertainment game object video game","codepoint":127918},{"annotations":"entertainment game joystick object video game","codepoint":128377},{"annotations":"dice die entertainment game object","codepoint":127922},{"annotations":"card game spade suit symbol","codepoint":9824},{"annotations":"card emotion game heart hearts suit symbol","codepoint":9829},{"annotations":"card diamond diamonds game suit symbol","codepoint":9830},{"annotations":"card club clubs game suit symbol","codepoint":9827},{"annotations":"card entertainment game joker object playing","codepoint":127183},{"annotations":"game mahjong object red","codepoint":126980},{"annotations":"activity card entertainment flower game japanese object playing","codepoint":127924},{"annotations":"mute object quiet silent sound speaker volume","codepoint":128263},{"annotations":"object sound speaker volume","codepoint":128264},{"annotations":"low object sound speaker volume wave","codepoint":128265},{"annotations":"3 entertainment high loud object sound speaker three volume","codepoint":128266},{"annotations":"communication loud loudspeaker object public address sound","codepoint":128226},{"annotations":"cheering communication megaphone object sound","codepoint":128227},{"annotations":"communication entertainment horn object post postal sound","codepoint":128239},{"annotations":"bell object sound","codepoint":128276},{"annotations":"bell forbidden mute no not object prohibited quiet silent sound","codepoint":128277},{"annotations":"activity entertainment music object score sound","codepoint":127932},{"annotations":"activity entertainment music note object sound","codepoint":127925},{"annotations":"activity entertainment music note notes object sound","codepoint":127926},{"annotations":"mic microphone music object sound studio","codepoint":127897},{"annotations":"level music object slider sound","codepoint":127898},{"annotations":"control knobs music object sound","codepoint":127899},{"annotations":"activity entertainment karaoke mic microphone object sound","codepoint":127908},{"annotations":"activity earbud entertainment headphone object sound","codepoint":127911},{"annotations":"entertainment object radio video","codepoint":128251},{"annotations":"activity entertainment instrument music object sax saxophone sound","codepoint":127927},{"annotations":"activity entertainment guitar instrument music object sound","codepoint":127928},{"annotations":"activity entertainment instrument keyboard music object piano sound","codepoint":127929},{"annotations":"activity entertainment instrument music object sound trumpet","codepoint":127930},{"annotations":"activity entertainment instrument music object sound violin","codepoint":127931},{"annotations":"cell communication mobile object phone telephone","codepoint":128241},{"annotations":"arrow call cell communication mobile object phone receive telephone","codepoint":128242},{"annotations":"object office phone sound telephone","codepoint":9742},{"annotations":"communication object phone receiver sound telephone","codepoint":128222},{"annotations":"communication object office pager","codepoint":128223},{"annotations":"communication fax object office","codepoint":128224},{"annotations":"battery object","codepoint":128267},{"annotations":"electric electricity object plug","codepoint":128268},{"annotations":"computer object office pc personal","codepoint":128187},{"annotations":"computer desktop object office","codepoint":128421},{"annotations":"computer object office printer","codepoint":128424},{"annotations":"computer keyboard object","codepoint":9000},{"annotations":"3 button computer mouse object office three","codepoint":128433},{"annotations":"computer object office trackball","codepoint":128434},{"annotations":"computer disk entertainment minidisk object office optical","codepoint":128189},{"annotations":"computer disk floppy object office","codepoint":128190},{"annotations":"blu-ray cd computer disk dvd object office optical","codepoint":128191},{"annotations":"blu-ray cd computer disk dvd entertainment object office optical","codepoint":128192},{"annotations":"activity camera cinema entertainment movie object","codepoint":127909},{"annotations":"cinema entertainment film frames movie object","codepoint":127902},{"annotations":"cinema entertainment film movie object projector video","codepoint":128253},{"annotations":"activity clapper entertainment movie object","codepoint":127916},{"annotations":"entertainment object television tv video","codepoint":128250},{"annotations":"camera entertainment object video","codepoint":128247},{"annotations":"camera flash object video","codepoint":128248},{"annotations":"camera entertainment object video","codepoint":128249},{"annotations":"entertainment object tape vhs video videocassette","codepoint":128252},{"annotations":"glass magnifying object search tool","codepoint":128269},{"annotations":"glass magnifying object search tool","codepoint":128270},{"annotations":"microscope object tool","codepoint":128300},{"annotations":"object telescope tool","codepoint":128301},{"annotations":"antenna communication dish object office satellite","codepoint":128225},{"annotations":"candle light object","codepoint":128367},{"annotations":"bulb comic electric idea light object","codepoint":128161},{"annotations":"electric flashlight light object tool torch","codepoint":128294},{"annotations":"bar japanese lantern light place red","codepoint":127982},{"annotations":"book cover decorated education notebook object office","codepoint":128212},{"annotations":"book closed education object office","codepoint":128213},{"annotations":"book education object office open","codepoint":128214},{"annotations":"book education green object office","codepoint":128215},{"annotations":"blue book education object office","codepoint":128216},{"annotations":"book education object office orange","codepoint":128217},{"annotations":"book books education object office","codepoint":128218},{"annotations":"notebook object office","codepoint":128211},{"annotations":"ledger notebook object office","codepoint":128210},{"annotations":"curl document object office page","codepoint":128195},{"annotations":"object office paper scroll","codepoint":128220},{"annotations":"document object office page","codepoint":128196},{"annotations":"communication news newspaper object paper","codepoint":128240},{"annotations":"news newspaper object paper rolled","codepoint":128478},{"annotations":"bookmark mark marker object office tabs","codepoint":128209},{"annotations":"bookmark mark object","codepoint":128278},{"annotations":"label object","codepoint":127991},{"annotations":"bag dollar money moneybag object office","codepoint":128176},{"annotations":"bank banknote bill currency money note object office yen","codepoint":128180},{"annotations":"bank banknote bill currency dollar money note object office","codepoint":128181},{"annotations":"bank banknote bill currency euro money note object office","codepoint":128182},{"annotations":"bank banknote bill currency money note object office pound","codepoint":128183},{"annotations":"bank banknote bill dollar fly money note object office wings","codepoint":128184},{"annotations":"bank card credit money object office","codepoint":128179},{"annotations":"bank chart currency graph growth market money object office rise symbol trend upward yen","codepoint":128185},{"annotations":"bank currency exchange money object office symbol","codepoint":128177},{"annotations":"currency dollar money object office symbol","codepoint":128178},{"annotations":"e-mail email envelope object office","codepoint":9993},{"annotations":"communication e-mail email letter mail object office","codepoint":128231},{"annotations":"communication e-mail email envelope incoming letter mail object office receive","codepoint":128232},{"annotations":"arrow communication down e-mail email envelope letter mail object office outgoing sent","codepoint":128233},{"annotations":"box communication letter mail object office outbox sent tray","codepoint":128228},{"annotations":"box communication inbox letter mail object office receive tray","codepoint":128229},{"annotations":"box communication object office package parcel","codepoint":128230},{"annotations":"closed communication flag mail mailbox object office postbox","codepoint":128235},{"annotations":"closed communication flag lowered mail mailbox object office postbox","codepoint":128234},{"annotations":"communication flag mail mailbox object office open postbox","codepoint":128236},{"annotations":"communication flag lowered mail mailbox object office open postbox","codepoint":128237},{"annotations":"communication mail mailbox object office postbox","codepoint":128238},{"annotations":"ballot box object","codepoint":128499},{"annotations":"object office pencil","codepoint":9999},{"annotations":"nib object office pen","codepoint":10002},{"annotations":"communication fountain object office pen","codepoint":128395},{"annotations":"ballpoint communication object office pen","codepoint":128394},{"annotations":"communication object office paintbrush painting","codepoint":128396},{"annotations":"communication crayon object office","codepoint":128397},{"annotations":"communication memo object office pencil","codepoint":128221},{"annotations":"briefcase object office person","codepoint":128188},{"annotations":"file folder object office","codepoint":128193},{"annotations":"file folder object office open","codepoint":128194},{"annotations":"card dividers index object office","codepoint":128450},{"annotations":"calendar date object office","codepoint":128197},{"annotations":"calendar object office","codepoint":128198},{"annotations":"note object office pad spiral","codepoint":128466},{"annotations":"calendar object office pad spiral","codepoint":128467},{"annotations":"card index object office rolodex","codepoint":128199},{"annotations":"chart graph growth object office trend upward","codepoint":128200},{"annotations":"chart down graph object office trend","codepoint":128201},{"annotations":"bar chart graph object office","codepoint":128202},{"annotations":"clipboard object office","codepoint":128203},{"annotations":"object office pin pushpin","codepoint":128204},{"annotations":"object office pin place pushpin","codepoint":128205},{"annotations":"object office paperclip","codepoint":128206},{"annotations":"communication link object office paperclip","codepoint":128391},{"annotations":"object office ruler straight edge","codepoint":128207},{"annotations":"object office ruler set triangle","codepoint":128208},{"annotations":"object office scissors tool","codepoint":9986},{"annotations":"box card file object office","codepoint":128451},{"annotations":"cabinet file object office","codepoint":128452},{"annotations":"object office wastebasket","codepoint":128465},{"annotations":"closed lock object","codepoint":128274},{"annotations":"lock object open unlock","codepoint":128275},{"annotations":"ink lock nib object pen privacy","codepoint":128271},{"annotations":"closed key lock object secure","codepoint":128272},{"annotations":"key lock object password","codepoint":128273},{"annotations":"clue key lock object old","codepoint":128477},{"annotations":"hammer object tool","codepoint":128296},{"annotations":"mining object pick tool","codepoint":9935},{"annotations":"hammer object pick tool","codepoint":9874},{"annotations":"hammer object tool wrench","codepoint":128736},{"annotations":"dagger knife object weapon","codepoint":128481},{"annotations":"crossed object swords weapon","codepoint":9876},{"annotations":"gun handgun object pistol revolver tool weapon","codepoint":128299},{"annotations":"archer arrow bow object sagittarius sport tool weapon zodiac","codepoint":127993},{"annotations":"object shield weapon","codepoint":128737},{"annotations":"object tool wrench","codepoint":128295},{"annotations":"bolt nut object tool","codepoint":128297},{"annotations":"gear object tool","codepoint":9881},{"annotations":"compression object tool vice","codepoint":128476},{"annotations":"alembic chemistry object tool","codepoint":9879},{"annotations":"balance justice libra object scales tool weight zodiac","codepoint":9878},{"annotations":"link object symbol","codepoint":128279},{"annotations":"chain object","codepoint":9939},{"annotations":"doctor medicine needle object shot sick syringe tool","codepoint":128137},{"annotations":"doctor medicine object pill sick","codepoint":128138},{"annotations":"activity object smoking","codepoint":128684},{"annotations":"coffin death object","codepoint":9904},{"annotations":"death funeral object urn","codepoint":9905},{"annotations":"face moyai place statue travel","codepoint":128511},{"annotations":"drum object oil","codepoint":128738},{"annotations":"ball crystal fairy tale fantasy fortune object tool","codepoint":128302},{"annotations":"atm automated bank place sign symbol teller","codepoint":127975},{"annotations":"litter litterbox place symbol travel","codepoint":128686},{"annotations":"drink potable sign symbol travel water","codepoint":128688},{"annotations":"access sign symbol travel wheelchair","codepoint":9855},{"annotations":"lavatory man restroom sign symbol travel wc","codepoint":128697},{"annotations":"lavatory restroom sign symbol travel wc woman","codepoint":128698},{"annotations":"lavatory restroom sign symbol travel wc","codepoint":128699},{"annotations":"baby changing sign symbol travel","codepoint":128700},{"annotations":"closet lavatory place restroom sign symbol travel water wc","codepoint":128702},{"annotations":"control passport place sign symbol travel","codepoint":128706},{"annotations":"customs place sign symbol travel","codepoint":128707},{"annotations":"baggage claim place sign symbol travel","codepoint":128708},{"annotations":"baggage left luggage locker luggage place sign symbol travel","codepoint":128709},{"annotations":"place symbol travel warning","codepoint":9888},{"annotations":"child crossing pedestrian place sign symbol traffic travel","codepoint":128696},{"annotations":"entry forbidden no not prohibited symbol traffic travel","codepoint":9940},{"annotations":"entry forbidden no not prohibited symbol travel","codepoint":128683},{"annotations":"bicycle bike forbidden no not place prohibited sign sport symbol travel vehicle","codepoint":128691},{"annotations":"forbidden no not prohibited sign smoking symbol travel","codepoint":128685},{"annotations":"forbidden litter no not prohibited sign symbol travel","codepoint":128687},{"annotations":"drink forbidden no not potable prohibited sign symbol travel water","codepoint":128689},{"annotations":"forbidden no not pedestrian place prohibited sign symbol travel","codepoint":128695},{"annotations":"cell communication forbidden mobile no not object phone prohibited symbol telephone","codepoint":128245},{"annotations":"18 age restriction eighteen forbidden no not prohibited symbol underage word","codepoint":128286},{"annotations":"radioactive sign symbol","codepoint":9762},{"annotations":"biohazard sign symbol","codepoint":9763},{"annotations":"arrow cardinal direction north symbol","codepoint":11014},{"annotations":"arrow direction intercardinal northeast symbol","codepoint":8599},{"annotations":"arrow cardinal direction east symbol","codepoint":10145},{"annotations":"arrow direction intercardinal southeast symbol","codepoint":8600},{"annotations":"arrow cardinal direction down south symbol","codepoint":11015},{"annotations":"arrow direction intercardinal southwest symbol","codepoint":8601},{"annotations":"arrow cardinal direction symbol west","codepoint":11013},{"annotations":"arrow direction intercardinal northwest symbol","codepoint":8598},{"annotations":"arrow symbol","codepoint":8597},{"annotations":"arrow symbol","codepoint":8596},{"annotations":"arrow symbol","codepoint":8617},{"annotations":"arrow symbol","codepoint":8618},{"annotations":"arrow symbol","codepoint":10548},{"annotations":"arrow down symbol","codepoint":10549},{"annotations":"arrow clockwise reload symbol","codepoint":128259},{"annotations":"anticlockwise arrow counterclockwise symbol withershins","codepoint":128260},{"annotations":"arrow back symbol","codepoint":128281},{"annotations":"arrow end symbol","codepoint":128282},{"annotations":"arrow mark on symbol","codepoint":128283},{"annotations":"arrow soon symbol","codepoint":128284},{"annotations":"arrow symbol top up","codepoint":128285},{"annotations":"place religion worship","codepoint":128720},{"annotations":"atheist atom symbol","codepoint":9883},{"annotations":"hindu om religion symbol","codepoint":128329},{"annotations":"david jew jewish religion star symbol","codepoint":10017},{"annotations":"buddhist dharma religion symbol wheel","codepoint":9784},{"annotations":"religion sign symbol tao taoist yang yin","codepoint":9775},{"annotations":"christian cross religion symbol","codepoint":10013},{"annotations":"christian cross religion symbol","codepoint":9766},{"annotations":"islam muslim religion symbol","codepoint":9770},{"annotations":"peace sign symbol","codepoint":9774},{"annotations":"candelabrum candlestick menorah object place religion","codepoint":128334},{"annotations":"fortune object star symbol","codepoint":128303},{"annotations":"recycle sign symbol","codepoint":9851},{"annotations":"badge name object office","codepoint":128219},{"annotations":"fleur-de-lis symbol","codepoint":9884},{"annotations":"beginner chevron green japanese leaf object tool yellow","codepoint":128304},{"annotations":"anchor emblem object ship symbol tool trident","codepoint":128305},{"annotations":"circle o symbol travel","codepoint":11093},{"annotations":"check mark sign symbol","codepoint":9989},{"annotations":"ballot box check sign symbol","codepoint":9745},{"annotations":"check mark sign symbol","codepoint":10004},{"annotations":"cancel multiplication multiply sign symbol x","codepoint":10006},{"annotations":"cancel mark multiplication multiply sign symbol x","codepoint":10060},{"annotations":"mark sign square symbol","codepoint":10062},{"annotations":"math plus sign symbol","codepoint":10133},{"annotations":"math minus sign symbol","codepoint":10134},{"annotations":"division math sign symbol","codepoint":10135},{"annotations":"curl loop sign symbol","codepoint":10160},{"annotations":"curl double loop sign symbol","codepoint":10175},{"annotations":"mark part sign symbol","codepoint":12349},{"annotations":"asterisk sign symbol","codepoint":10035},{"annotations":"sign star symbol","codepoint":10036},{"annotations":"sign sparkle symbol","codepoint":10055},{"annotations":"bangbang exclamation mark punctuation symbol word","codepoint":8252},{"annotations":"exclamation interrobang mark punctuation question symbol word","codepoint":8265},{"annotations":"mark punctuation question symbol word","codepoint":10067},{"annotations":"mark outlined punctuation question symbol word","codepoint":10068},{"annotations":"exclamation mark outlined punctuation symbol word","codepoint":10069},{"annotations":"exclamation mark punctuation symbol word","codepoint":10071},{"annotations":"dash punctuation sound symbol wavy","codepoint":12336},{"annotations":"copyright symbol word","codepoint":169},{"annotations":"registered symbol word","codepoint":174},{"annotations":"mark symbol tm trademark word","codepoint":8482},{"annotations":"aries ram symbol time zodiac","codepoint":9800},{"annotations":"bull ox symbol taurus time zodiac","codepoint":9801},{"annotations":"gemini symbol time twins zodiac","codepoint":9802},{"annotations":"cancer crab symbol time zodiac","codepoint":9803},{"annotations":"leo lion symbol time zodiac","codepoint":9804},{"annotations":"maiden symbol time virgin virgo zodiac","codepoint":9805},{"annotations":"balance justice libra scales symbol time zodiac","codepoint":9806},{"annotations":"scorpio scorpion scorpius symbol time zodiac","codepoint":9807},{"annotations":"archer sagittarius symbol time zodiac","codepoint":9808},{"annotations":"capricorn goat symbol time zodiac","codepoint":9809},{"annotations":"aquarius bearer symbol time water zodiac","codepoint":9810},{"annotations":"fish pisces symbol time zodiac","codepoint":9811},{"annotations":"bearer ophiuchus serpent snake symbol zodiac","codepoint":9934},{"annotations":"arrow crossed symbol","codepoint":128256},{"annotations":"arrow clockwise repeat symbol","codepoint":128257},{"annotations":"arrow clockwise once symbol","codepoint":128258},{"annotations":"arrow play right sound symbol triangle","codepoint":9654},{"annotations":"arrow double fast forward sound symbol","codepoint":9193},{"annotations":"arrow next scene next track sound symbol triangle","codepoint":9197},{"annotations":"arrow pause play right sound symbol triangle","codepoint":9199},{"annotations":"arrow left reverse sound symbol triangle","codepoint":9664},{"annotations":"arrow double rewind sound symbol","codepoint":9194},{"annotations":"arrow previous scene previous track sound symbol triangle","codepoint":9198},{"annotations":"arrow button red symbol","codepoint":128316},{"annotations":"arrow double sound symbol","codepoint":9195},{"annotations":"arrow button down red symbol","codepoint":128317},{"annotations":"arrow double down sound symbol","codepoint":9196},{"annotations":"bar double pause sound symbol vertical","codepoint":9208},{"annotations":"sound square stop symbol","codepoint":9209},{"annotations":"circle record sound symbol","codepoint":9210},{"annotations":"eject sound symbol","codepoint":9167},{"annotations":"activity camera cinema entertainment film movie object symbol","codepoint":127910},{"annotations":"brightness dim low sign symbol","codepoint":128261},{"annotations":"bright brightness sign symbol","codepoint":128262},{"annotations":"antenna bar cell communication mobile object phone signal symbol telephone","codepoint":128246},{"annotations":"cell communication mobile mode object phone symbol telephone vibration","codepoint":128243},{"annotations":"cell communication mobile object off phone symbol telephone","codepoint":128244},{"annotations":"10 keycap symbol ten word","codepoint":128287},{"annotations":"100 full hundred office score symbol","codepoint":128175},{"annotations":"input latin letters symbol uppercase word","codepoint":128288},{"annotations":"abcd input latin letters lowercase symbol word","codepoint":128289},{"annotations":"1234 input numbers symbol word","codepoint":128290},{"annotations":"input symbol word","codepoint":128291},{"annotations":"abc alphabet input latin letters symbol word","codepoint":128292},{"annotations":"a blood symbol word","codepoint":127344},{"annotations":"ab blood symbol word","codepoint":127374},{"annotations":"b blood symbol word","codepoint":127345},{"annotations":"cl symbol word","codepoint":127377},{"annotations":"cool symbol word","codepoint":127378},{"annotations":"free symbol word","codepoint":127379},{"annotations":"i information symbol word","codepoint":8505},{"annotations":"id identity symbol word","codepoint":127380},{"annotations":"circle m place symbol word","codepoint":9410},{"annotations":"new symbol word","codepoint":127381},{"annotations":"ng symbol word","codepoint":127382},{"annotations":"blood o symbol word","codepoint":127358},{"annotations":"ok symbol word","codepoint":127383},{"annotations":"parking place sign symbol word","codepoint":127359},{"annotations":"help sos symbol word","codepoint":127384},{"annotations":"mark symbol up word","codepoint":127385},{"annotations":"symbol versus vs word","codepoint":127386},{"annotations":"japanese symbol word","codepoint":127489},{"annotations":"japanese symbol word","codepoint":127490},{"annotations":"japanese symbol word","codepoint":127543},{"annotations":"japanese symbol word","codepoint":127542},{"annotations":"japanese symbol word","codepoint":127535},{"annotations":"japanese symbol word","codepoint":127568},{"annotations":"japanese symbol word","codepoint":127545},{"annotations":"japanese symbol word","codepoint":127514},{"annotations":"japanese symbol word","codepoint":127538},{"annotations":"chinese symbol word","codepoint":127569},{"annotations":"chinese symbol word","codepoint":127544},{"annotations":"chinese symbol word","codepoint":127540},{"annotations":"chinese symbol word","codepoint":127539},{"annotations":"chinese congratulation congratulations ideograph symbol word","codepoint":12951},{"annotations":"chinese ideograph secret symbol word","codepoint":12953},{"annotations":"chinese symbol word","codepoint":127546},{"annotations":"chinese symbol word","codepoint":127541},{"annotations":"geometric sign square symbol","codepoint":9642},{"annotations":"geometric sign square symbol","codepoint":9643},{"annotations":"geometric sign square symbol","codepoint":9723},{"annotations":"geometric sign square symbol","codepoint":9724},{"annotations":"geometric sign square symbol","codepoint":9725},{"annotations":"geometric sign square symbol","codepoint":9726},{"annotations":"geometric sign square symbol","codepoint":11035},{"annotations":"geometric sign square symbol","codepoint":11036},{"annotations":"diamond geometric orange sign symbol","codepoint":128310},{"annotations":"blue diamond geometric sign symbol","codepoint":128311},{"annotations":"diamond geometric orange sign symbol","codepoint":128312},{"annotations":"blue diamond geometric sign symbol","codepoint":128313},{"annotations":"geometric red sign symbol","codepoint":128314},{"annotations":"down geometric red sign symbol","codepoint":128315},{"annotations":"comic diamond geometric inside sign symbol","codepoint":128160},{"annotations":"button geometric radio sign symbol","codepoint":128280},{"annotations":"button geometric sign square symbol","codepoint":128306},{"annotations":"button geometric outlined sign square symbol","codepoint":128307},{"annotations":"circle geometric sign symbol","codepoint":9898},{"annotations":"circle geometric sign symbol","codepoint":9899},{"annotations":"circle geometric red sign symbol","codepoint":128308},{"annotations":"blue circle geometric sign symbol","codepoint":128309},{"annotations":"checkered chequered flag object place racing sport","codepoint":127937},{"annotations":"flag object place post travel","codepoint":128681},{"annotations":"activity celebration cross crossed flag japanese object","codepoint":127884},{"annotations":"flag object waving","codepoint":127988},{"annotations":"flag object waving","codepoint":127987}];

	tinymce.PluginManager.add( 'sep_emoji', function( editor ) {
		var toolbar;
		var editToolbar;
		var previewInstance;
		var inputInstance;
		var linkNode;
		var doingUndoRedo;
		var doingUndoRedoTimer;
		var $emojiButtons;
		var $ = window.jQuery;
		var _ugh;
		var controlVisible = false;
		var node;


		window.setInterval(function() {
			if ( _ugh ){
				controlVisible = _ugh._parent._parent._parent.visible();
			}
		}, 100);

		editor.on( 'keydown', function( event ) {
			// Check if the parent control is visible and prevent the insert emoji
			// control from closing if the user is pressing navigational buttons.
			// the _parent._parent bit seems hacky, but not sure how else to check
			// if the toolbar is open.
			if ( controlVisible && ( event.keyCode === 39 || event.keyCode === 37 || event.keyCode === 13 ) ) {
				var offset = editor.selection.getRng().startOffset;
				_ugh.handleBrowseEmojiEvent(event);
				openTheToolbar = true;
				if ( event.keyCode === 13 ) {
					var colonIndex = node.data.lastIndexOf( ':', offset );
					// Cancel out if the autocomplete text has already been deleted.
					if ( colonIndex === -1 ) {
						return;
					}
					var rng = tinymce.DOM.createRng();
					rng.setStart(node, colonIndex);
					rng.setEnd(node, offset);
					rng.deleteContents();
				}
			}
		} );
		/**
		 * An emoji input control.
		 *
		 * I've defined this inside of the plugin function because it needs
		 * access to the editor instance. Does this make sense, or could the control
		 * gain access to the editor instance in a cleaner way (thinking something like this.editor)?
		 */
		tinymce.ui.SEPEmojiInput = tinymce.ui.Control.extend( {
			init: function(settings) {
				_ugh = this;
				this._super.call( this, settings );
			},
			/**
			 * Render the control.
			 *
			 * @return string The HTML.
			 */
			renderHtml: function() {
				var html = '';
				html += '<div id="' + this._id + '" class="sep-emoji-input">';
				html += '<input class="sep-emoji-autocomplete" type="text" value="" placeholder="' + tinymce.translate( 'Type an emoji\'s name' ) + '" />';
				html += '<div class="sep-emoji-buttons-and-navigation">';
				html += '<div class="sep-emoji-buttons">';
				// buttonHtml += 'glerf a derf erf glerf a derf erf glerf a derf erf glerf a derf erf glerf a derf erfglerf a derf erf glerf a derf erf glerf a derf erf ';
				for ( i = 0; i < emojiList.length; i++ ) {
					html += '<button data-annotations="' + emojiList[i].annotations + '" data-code-point="' + emojiList[i].codepoint + '" type="button">' + fromCodePoint( emojiList[i].codepoint ) + '</button>';
				}
				html += '</div>';
				html += '<div class="sep-emoji-navigation"><button data-nav-direction="up" type="button"><i class="sep-i-up"></i></button><button data-navigation-direction="down" type="button"><i class="sep-i-down"></i></button></div>';
				html += '</div>';
				html += '</div>';
				return html;
			},

			/**
			 * After the HTML of the control has been rendered to the page,
			 * we can bind various on-click handlers.
			 *
			 * Note that the control is rendered once and visually hidden when
			 * not in use.
			 */
			postRender: function() {
				var self = this;
				this.$el = jQuery( this.getEl() );
				$emojiButtons = this.$el.find('.sep-emoji-buttons button');
				this.setSelectedEmoji();
				this.search = '';
				this.$el.find('button').on('click', function() {
					openTheToolbar = true;
					editor.execCommand( 'mceInsertContent', false, fromCodePoint( jQuery(this).data('code-point') ) );
				});

				this.$el.find('.sep-emoji-autocomplete')
					.on('keyup', function() {
						var search = jQuery('.sep-emoji-autocomplete').val();
						if ( self.search == search ) {
							return;
						}
						self.search = search;
						self.filterEmoji( self.search );
					})
					.on('keydown', function(event) {
						self.handleBrowseEmojiEvent(event)
					} );

				this.$el.find('.sep-emoji-navigation button').on( 'click', function() {
					var scroll;
					if ( $(this).data('nav-direction') == 'up' ) {
						scroll = -120;
					} else {
						scroll = 120;
					}
					self.$el.find('.sep-emoji-buttons')[0].scrollTop += scroll;
				});
			},

			handleBrowseEmojiEvent(event) {
				if ( event.keyCode === 13 ) {
					event.preventDefault();
					// insert the selected item, don't close the window.
					openTheToolbar = true;
					editor.execCommand( 'mceInsertContent',
						false,
						fromCodePoint( $emojiButtons.filter('.selected').data('code-point') )
					);
					if ( ! this.$el.hasClass('text-input-hidden') ) {
						this.$el.find( 'input.sep-emoji-autocomplete' )[0].focus();
					}
				}

				// Left arrow
				if ( event.keyCode === 37 ) {
					var current = $emojiButtons.filter('.selected');
					var prev = current.prevAll('.sep-emoji-buttons button:not(.does-not-match-filter)').first();
					if ( prev.length ) {
						current.removeClass('selected');
						prev.addClass('selected');
					}
					event.preventDefault();
				}

				// Right arrow
				if ( event.keyCode === 39 ) {
					var current = $emojiButtons.filter('.selected');
					var next = current.nextAll('.sep-emoji-buttons button:not(.does-not-match-filter)').first();
					if ( next.length ) {
						current.removeClass('selected');
						next.addClass('selected');
					}
					event.preventDefault();
				}
			},

			hideTextInput: function() {
				this.$el.addClass('text-input-hidden');
			},

			showTextInput: function() {
				this.$el.removeClass('text-input-hidden');
			},

			setSelectedEmoji: function() {
				$emojiButtons.filter('.selected').removeClass('selected');
				if ( $emojiButtons.filter('.selected:not(.does-not-match-filter)').length === 0 ) {
					// maybe change this so it doesn't query 1000 and then get the first.
					$emojiButtons.filter(':not(.does-not-match-filter)').first().addClass('selected');
				}
			},

			resetEmojiButtonState: function() {
				$emojiButtons.removeClass('does-not-match-filter');
			},

			filterEmoji(searchString) {
				// todo this can probably be optimized.
				$emojiButtons.each(function(index) {
					if ( ! this.getAttribute('data-annotations') || this.getAttribute('data-annotations').indexOf(searchString) === -1 ) {
						jQuery(this).addClass('does-not-match-filter' );
					} else {
						jQuery(this).removeClass('does-not-match-filter' );
					}
				});
				this.setSelectedEmoji();
			}

		} );

		editor.on( 'preinit', function() {
			if ( editor.wp && editor.wp._createToolbar ) {
				var insertButtons = ['sep_emoji_input'];

				// Create the inline toolbar, which is what pops-up for the user
				// to select their emoji in.
				editToolbar = editor.wp._createToolbar( insertButtons, true );

				editToolbar.on( 'show', function() {
					if ( ! tinymce.$( document.body ).hasClass( 'modal-open' ) ) {
						// Set an immediate timeout presumably to avoid some race condition.
						window.setTimeout( function() {
							var element = editToolbar.$el.find( 'input.sep-emoji-autocomplete' )[0];
							if ( element ) {
								if ( ! doingUndoRedo ) {
									element.focus();
									element.select();
								}
							}
						} );
					}
				} );
			}
		} );

		/**
		 * This is some sort of "command" that is invoked when I press the toolbar
		 * button, which will set dumb global state properly so our `wptoolbar`
		 * handler will open the toolbar.
		 */
		editor.addCommand( 'SEP_Emoji', function() {
			// This seems so hacky but how else to I get the button instance?
			editToolbar.items()[0].items()[0].items()[0].resetEmojiButtonState();
			openTheToolbar = true;
			// This seems so hacky but how else to I get the button instance?
			editToolbar.items()[0].items()[0].items()[0].showTextInput();
			editor.nodeChanged();
		} );


		editor.addButton( 'sep_emoji', {
			icon: 'sep_emoji',
			tooltip: 'Insert Emoji',
			cmd: 'SEP_Emoji',
			stateSelector: ''
		});

		editor.addButton( 'sep_emoji_input', {
			type: 'SEPEmojiInput',
			onPostRender: function() {
				tinymce.$( element.firstChild ).on( 'keydown', function( event ) {
					if ( event.keyCode === 13 ) {
						editor.execCommand( 'wp_link_apply' );
						event.preventDefault();
					}
				} );
			}
		} );

		var lastTimeToolbarTriedToOpen = new Date().getTime();
		// On the `wptoolbar` event, set the toolbar if we should.
		editor.on( 'wptoolbar', function( event ) {
			// Jesus please cleanse my soul.
			var now = new Date().getTime();
			if ( now - lastTimeToolbarTriedToOpen < 100 && ! openTheToolbar ) {
				openTheToolbar = true;
			}
			if ( openTheToolbar ) {
				lastTimeToolbarTriedToOpen = new Date().getTime();
				openTheToolbar = false;
				event.toolbar = editToolbar;
			}
		} );

		editor.on( 'keyup', function( event ) {
			if ( event.keyCode > 47 && ! ( event.keyCode >= 91 && event.keyCode <= 93 ) ) {
				checkInline();
			}
		} );
		function checkInline() {
			var rng = editor.selection.getRng();
			node = rng.startContainer;
			var offset = rng.startOffset;
			var startOffset;
			var endOffset;
			var pattern;
			var format;
			var zero;

			if ( ! node || node.nodeType !== 3 || ! node.data.length || ! offset ) {
				openTheToolbar = false;
				return;
			}

			var colonIndex = node.data.lastIndexOf( ':', editor.selection.getRng().startOffset );
			if ( colonIndex == -1 ) {
				openTheToolbar = false;
				return;
			}
			var searchString = node.data.substring( colonIndex+1, editor.selection.getRng().startOffset );
			if ( ! searchString || searchString.length < 2 || searchString.indexOf(' ') !== -1 ) {
				openTheToolbar = false;
				editor.nodeChanged();
				return;
			}

			editToolbar.items()[0].items()[0].items()[0].filterEmoji(searchString);

			openTheToolbar = true;
			editToolbar.items()[0].items()[0].items()[0].hideTextInput();
			editor.nodeChanged();
		}
	} );

} )( window.tinymce );
